---
title: 'Web SDK Methods'
description: 'Complete reference for all Nuvei Web SDK JavaScript methods'
---

# Web SDK Methods

The Nuvei Web SDK provides JavaScript methods for building custom payment integrations with full control over the UI and payment flow.

## SDK Initialization

### SafeCharge()

Initialize the Web SDK with configuration options.

```javascript
const safecharge = SafeCharge({
  // Required
  env: 'int',                      // 'int' (sandbox) or 'prod' (production)
  merchantId: '1234567890',        // Your Nuvei merchant ID
  merchantSiteId: '123456',        // Your Nuvei merchant site ID
  
  // Optional
  sessionToken: 'xxx',             // Pre-set session token
  
  // Advanced options
  blockCards: ['amex'],            // Block card brands globally
  blockPasteCard: true,            // Prevent card paste
  disableNuveiAnalytics: false,    // Disable analytics
  showAccountCapture: false,       // Show account capture option
  support19Digits: false,          // Support 19-digit cards
  strictCardBlocking: false,       // Use BIN-level blocking
  cvvIcon: true,                   // Show CVV help icon
  
  // Event callback
  onPaymentEvent: function(event) {
    console.log('Payment event:', event);
  }
});
```

**Configuration Options:**

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `env` | string | Yes | - | `int` (sandbox) or `prod` (production) |
| `merchantId` | string | Yes | - | Your Nuvei merchant ID |
| `merchantSiteId` | string | Yes | - | Your Nuvei merchant site ID |
| `sessionToken` | string | No | - | Pre-set session token |
| `blockCards` | array | No | `[]` | Globally blocked card brands |
| `blockPasteCard` | boolean | No | `false` | Prevent pasting card numbers |
| `disableNuveiAnalytics` | boolean | No | `false` | Disable SDK analytics |
| `showAccountCapture` | boolean | No | `false` | Show bank account capture |
| `support19Digits` | boolean | No | `false` | Support 19-digit cards |
| `strictCardBlocking` | boolean | No | `false` | Use BIN-level card blocking |
| `cvvIcon` | boolean/object | No | `true` | CVV help icon configuration |
| `onPaymentEvent` | function | No | - | Global payment event callback |

---

## Payment Methods

### createPayment()

Create a payment using card data, APM, or saved payment method.

```javascript
safecharge.createPayment({
  // Required
  sessionToken: sessionToken,
  
  // Payment Option - Card
  paymentOption: {
    card: {
      cardNumber: '4111111111111111',
      cardHolderName: 'John Smith',
      expirationMonth: '12',
      expirationYear: '2025',
      CVV: '217'
    }
  },
  
  // Optional - Billing address
  billingAddress: {
    firstName: 'John',
    lastName: 'Smith',
    email: 'john@example.com',
    phone: '+1-555-123-4567',
    address: '123 Main St',
    city: 'New York',
    state: 'NY',
    zip: '10001',
    country: 'US'
  },
  
  // Optional - Shipping address
  shippingAddress: {
    firstName: 'John',
    lastName: 'Smith',
    address: '123 Main St',
    city: 'New York',
    state: 'NY',
    zip: '10001',
    country: 'US'
  },
  
  // Optional - Custom data
  clientUniqueId: 'order_789',
  merchantDetails: {
    customField1: 'value1'
  },
  
  // Optional - URL details
  urlDetails: {
    notificationUrl: 'https://your-site.com/webhook'
  },
  
  // Optional - Additional params
  alwaysCollectCvv: 'true',
  selectedBrand: 'VISA'
  
}, function(response) {
  handleResponse(response);
});
```

**Using User Payment Option (Saved Card):**

```javascript
safecharge.createPayment({
  sessionToken: sessionToken,
  
  paymentOption: {
    userPaymentOptionId: '1234567890',
    card: {
      CVV: '217'  // CVV required if alwaysCollectCvv enabled
    }
  }
  
}, handleResponse);
```

**Using APM:**

```javascript
safecharge.createPayment({
  sessionToken: sessionToken,
  
  paymentOption: {
    alternativePaymentMethod: {
      paymentMethod: 'apmgw_PayPal'
    }
  },
  
  // Required for APM redirects
  urlDetails: {
    successUrl: 'https://your-site.com/success',
    failureUrl: 'https://your-site.com/failure',
    pendingUrl: 'https://your-site.com/pending'
  }
  
}, handleResponse);
```

**Request Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `sessionToken` | string | Yes | Session token from openOrder |
| `paymentOption` | object | Yes | Payment method details |
| `billingAddress` | object | Recommended | Customer billing address |
| `shippingAddress` | object | No | Shipping address |
| `deviceDetails` | object | Recommended | Device fingerprinting |
| `urlDetails` | object | Conditional | Redirect URLs (required for APMs) |
| `clientUniqueId` | string | No | Your unique transaction ID |
| `merchantDetails` | object | No | Custom fields 1-15 |
| `alwaysCollectCvv` | string | No | CVV collection mode |
| `selectedBrand` | string | No | Selected brand for co-badged cards |

**Response Object:**

| Property | Type | Description |
|----------|------|-------------|
| `result` | string | `APPROVED`, `DECLINED`, `PENDING`, `ERROR` |
| `transactionId` | string | Nuvei transaction ID |
| `transactionStatus` | string | Detailed status |
| `authCode` | string | Authorization code |
| `errCode` | string | Error code (if failed) |
| `errorDescription` | string | Error message (if failed) |
| `userPaymentOptionId` | string | Saved payment method ID |
| `threeD` | object | 3DS authentication details |

**3DS Response Fields:**

| Property | Type | Description |
|----------|------|-------------|
| `eci` | string | Electronic Commerce Indicator |
| `cavv` | string | Cardholder Authentication Value |
| `dsTransID` | string | Directory Server Transaction ID |
| `threeDReasonId` | string | 3DS reason code |
| `threeDReason` | string | 3DS reason message |
| `isLiabilityOnIssuer` | string | `1` = liability shifted |
| `challengePreferenceReason` | string | Challenge preference reason |

---

### authenticate3d()

Perform 3D Secure authentication after initial payment request returns REDIRECT status.

```javascript
safecharge.authenticate3d({
  // Required
  sessionToken: sessionToken,
  transactionId: initialResponse.transactionId,
  
  // Optional - Challenge window configuration
  challengeWindowSize: '05',  // Full screen
  
  // Optional - Container for challenge iframe
  container: '#challenge-container'
  
}, function(response) {
  if (response.result === 'APPROVED') {
    console.log('Payment approved after 3DS');
  } else {
    console.log('Payment failed:', response.errorDescription);
  }
});
```

**Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `sessionToken` | string | Yes | Session token |
| `transactionId` | string | Yes | Transaction ID from createPayment |
| `challengeWindowSize` | string | No | Size of 3DS challenge window |
| `container` | string | No | CSS selector for challenge iframe |

**Challenge Window Sizes:**

| Code | Dimensions |
|------|------------|
| `01` | 250 x 400 pixels |
| `02` | 390 x 400 pixels |
| `03` | 500 x 600 pixels |
| `04` | 600 x 400 pixels |
| `05` | Full screen |

**Full 3DS Flow Example:**

```javascript
safecharge.createPayment({
  sessionToken: sessionToken,
  paymentOption: {
    card: cardData
  }
}, function(initResponse) {
  if (initResponse.transactionStatus === 'REDIRECT') {
    // 3DS required
    safecharge.authenticate3d({
      sessionToken: sessionToken,
      transactionId: initResponse.transactionId,
      challengeWindowSize: '05'
    }, function(authResponse) {
      handleFinalResponse(authResponse);
    });
  } else {
    // No 3DS required, payment complete
    handleFinalResponse(initResponse);
  }
});
```

---

## APM Methods

### getAPMs()

Retrieve available alternative payment methods based on country and currency.

```javascript
safecharge.getAPMs({
  sessionToken: sessionToken,
  currencyCode: 'EUR',
  countryCode: 'DE',
  languageCode: 'en'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    response.paymentMethods.forEach(apm => {
      console.log(apm.paymentMethod, apm.paymentMethodDisplayName);
      
      // Check if APM requires additional fields
      if (apm.fields && apm.fields.length > 0) {
        console.log('Required fields:', apm.fields);
      }
    });
  }
});
```

**Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `sessionToken` | string | Yes | Session token |
| `currencyCode` | string | Yes | ISO currency code |
| `countryCode` | string | Yes | ISO country code |
| `languageCode` | string | No | Display language |

**Response:**

```json
{
  "status": "SUCCESS",
  "paymentMethods": [
    {
      "paymentMethod": "apmgw_PayPal",
      "paymentMethodDisplayName": "PayPal",
      "logoURL": "https://cdn.../paypal.png",
      "countries": ["DE", "US", "GB"],
      "currencies": ["EUR", "USD", "GBP"]
    },
    {
      "paymentMethod": "apmgw_Sofort",
      "paymentMethodDisplayName": "Sofort",
      "countries": ["DE", "AT"],
      "currencies": ["EUR"],
      "fields": [
        {
          "name": "iban",
          "type": "text",
          "caption": "IBAN",
          "required": true
        }
      ]
    }
  ]
}
```

---

## DCC Methods

### clientGetDccDetails()

Get Dynamic Currency Conversion details for a transaction.

```javascript
safecharge.clientGetDccDetails({
  sessionToken: sessionToken,
  cardNumber: '4111111111111111',  // Or first 6 digits
  originalAmount: '100.00',
  originalCurrency: 'USD'
  
}, function(response) {
  if (response.status === 'SUCCESS' && response.dccAllowed) {
    console.log('DCC available');
    console.log('Converted amount:', response.convertedAmount);
    console.log('Converted currency:', response.convertedCurrency);
    console.log('Exchange rate:', response.conversionRate);
    console.log('Markup:', response.markup);
    
    // Present choice to user
    showDccChoice(response);
  }
});
```

**Response:**

| Property | Type | Description |
|----------|------|-------------|
| `dccAllowed` | boolean | Whether DCC is available |
| `convertedAmount` | string | Amount in cardholder currency |
| `convertedCurrency` | string | Cardholder currency code |
| `conversionRate` | string | Exchange rate |
| `markup` | string | DCC markup percentage |
| `rateSourceName` | string | Rate source name |

---

## Tokenization Methods

### getCardDetails()

Get card details including BIN information (card brand, type, issuer).

```javascript
safecharge.getCardDetails({
  sessionToken: sessionToken,
  cardNumber: '411111'  // At least first 6 digits (BIN)
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Brand:', response.brand);          // VISA
    console.log('Type:', response.cardType);        // credit/debit
    console.log('Country:', response.issuingCountry);
    console.log('Bank:', response.issuingBank);
    
    // Update UI
    updateCardBrandIcon(response.brand);
    
    // Check for blocked card types
    if (response.cardType === 'prepaid' && blockPrepaid) {
      showError('Prepaid cards not accepted');
    }
  }
});
```

**Response:**

| Property | Type | Description |
|----------|------|-------------|
| `brand` | string | Card brand (VISA, MASTERCARD, AMEX, etc.) |
| `cardType` | string | `credit`, `debit`, `prepaid` |
| `issuingCountry` | string | ISO country code |
| `issuingBank` | string | Issuing bank name |
| `cardProgram` | string | Card program (Platinum, Gold, etc.) |
| `cardProduct` | string | Card product type |

---

### getUserUPOs()

Retrieve user's saved payment methods (User Payment Options).

```javascript
safecharge.getUserUPOs({
  sessionToken: sessionToken,
  userTokenId: 'user_123'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    response.paymentMethods.forEach(upo => {
      console.log('UPO ID:', upo.userPaymentOptionId);
      console.log('Type:', upo.paymentMethodName);
      console.log('Name:', upo.upoName);
      
      if (upo.paymentMethodName === 'cc_card') {
        console.log('Card:', upo.ccCardNumber);  // Masked
        console.log('Expiry:', upo.ccExpMonth + '/' + upo.ccExpYear);
        console.log('Brand:', upo.brand);
      }
    });
    
    // Render saved payment methods UI
    renderSavedPaymentMethods(response.paymentMethods);
  }
});
```

**Response:**

```json
{
  "status": "SUCCESS",
  "paymentMethods": [
    {
      "userPaymentOptionId": "123456789",
      "paymentMethodName": "cc_card",
      "upoName": "Visa ending 4242",
      "upoStatus": "enabled",
      "ccCardNumber": "4***4242",
      "ccExpMonth": "12",
      "ccExpYear": "26",
      "brand": "VISA",
      "cardType": "credit"
    },
    {
      "userPaymentOptionId": "987654321",
      "paymentMethodName": "apmgw_PayPal",
      "upoName": "user@example.com",
      "upoStatus": "enabled"
    }
  ]
}
```

---

### addCardUpo()

Save a new card as a User Payment Option.

```javascript
safecharge.addCardUpo({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  card: {
    cardNumber: '4111111111111111',
    cardHolderName: 'John Smith',
    expirationMonth: '12',
    expirationYear: '2026',
    CVV: '217'
  },
  billingAddress: {
    firstName: 'John',
    lastName: 'Smith',
    email: 'john@example.com',
    country: 'US'
  }
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Card saved, UPO ID:', response.userPaymentOptionId);
  }
});
```

---

### addApmUpo()

Save a new APM as a User Payment Option.

```javascript
safecharge.addApmUpo({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  paymentMethod: 'apmgw_PayPal',
  apmData: {
    email: 'user@example.com'
  }
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('APM saved, UPO ID:', response.userPaymentOptionId);
  }
});
```

---

### deleteUPO()

Delete a saved payment method.

```javascript
safecharge.deleteUPO({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  userPaymentOptionId: '123456789'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Payment method deleted');
    // Update UI
    removeFromPaymentMethodList('123456789');
  }
});
```

---

## Account Capture Methods

### accountCapture()

Capture bank account details for payouts.

```javascript
safecharge.accountCapture({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  
  // Rendering
  container: '#account-capture-container',
  
  // Locale
  locale: 'en',
  country: 'US',
  
  // Callbacks
  onAccountReady: function(accountData) {
    console.log('Account captured:', accountData);
    // accountData contains bank details for payout
  },
  onError: function(error) {
    console.error('Account capture error:', error);
  }
});
```

---

## Withdrawal Methods

### submitWdRequest()

Submit a withdrawal/payout request.

```javascript
safecharge.submitWdRequest({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  userPaymentOptionId: '123456789',  // Saved payout method
  amount: '100.00',
  currency: 'USD',
  merchantDetails: {
    customField1: 'withdrawal_ref_123'
  }
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Withdrawal submitted:', response.withdrawalRequestId);
  }
});
```

---

### getWdRequests()

Get withdrawal request history.

```javascript
safecharge.getWdRequests({
  sessionToken: sessionToken,
  userTokenId: 'user_123'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    response.withdrawalRequests.forEach(wd => {
      console.log('Request ID:', wd.requestId);
      console.log('Amount:', wd.amount, wd.currency);
      console.log('Status:', wd.status);
      console.log('Created:', wd.createdAt);
    });
  }
});
```

---

### cancelWdRequest()

Cancel a pending withdrawal request.

```javascript
safecharge.cancelWdRequest({
  sessionToken: sessionToken,
  userTokenId: 'user_123',
  withdrawalRequestId: 'wd_123456'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Withdrawal cancelled');
    // Restore user balance
    updateUserBalance();
  }
});
```

---

## Digital Wallet Methods

### Apple Pay

#### createApplePayPayment()

Process an Apple Pay payment.

```javascript
// First check if Apple Pay is available
if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
  
  safecharge.createApplePayPayment({
    sessionToken: sessionToken,
    
    // Apple Pay request
    paymentRequest: {
      countryCode: 'US',
      currencyCode: 'USD',
      total: {
        label: 'Your Store',
        amount: '99.99'
      },
      merchantCapabilities: ['supports3DS'],
      supportedNetworks: ['visa', 'masterCard', 'amex']
    },
    
    // Billing contact (optional)
    requireBillingAddress: true
    
  }, function(response) {
    if (response.result === 'APPROVED') {
      console.log('Apple Pay payment successful');
      redirectToConfirmation(response.transactionId);
    }
  });
}
```

---

### Google Pay

#### createGooglePayPayment()

Process a Google Pay payment.

```javascript
safecharge.createGooglePayPayment({
  sessionToken: sessionToken,
  
  // Google Pay configuration
  environment: 'TEST',  // 'TEST' or 'PRODUCTION'
  merchantId: 'BCR2DN6xxxxxx',  // Google Merchant ID
  merchantName: 'Your Store',
  
  // Transaction info
  transactionInfo: {
    totalPriceStatus: 'FINAL',
    totalPrice: '99.99',
    currencyCode: 'USD',
    countryCode: 'US'
  },
  
  // Card networks
  allowedCardNetworks: ['VISA', 'MASTERCARD', 'AMEX'],
  allowedCardAuthMethods: ['PAN_ONLY', 'CRYPTOGRAM_3DS']
  
}, function(response) {
  if (response.result === 'APPROVED') {
    console.log('Google Pay payment successful');
    redirectToConfirmation(response.transactionId);
  }
});
```

---

## Secure Fields (PCI SAQ A)

Create secure hosted fields for card input while minimizing PCI scope.

### createFields()

```javascript
const fields = safecharge.createFields({
  sessionToken: sessionToken,
  
  // Styling
  style: {
    base: {
      fontFamily: 'Arial, sans-serif',
      fontSize: '16px',
      color: '#333333',
      '::placeholder': {
        color: '#999999'
      }
    },
    invalid: {
      color: '#ff0000'
    },
    focus: {
      borderColor: '#00D09C'
    }
  }
});

// Create individual fields
const cardNumber = fields.create('cardNumber');
const cardExpiry = fields.create('cardExpiry');
const cardCvc = fields.create('cardCvc');

// Mount to DOM elements
cardNumber.mount('#card-number');
cardExpiry.mount('#card-expiry');
cardCvc.mount('#card-cvc');

// Listen for events
fields.on('ready', () => {
  console.log('Secure fields ready');
});

fields.on('change', (event) => {
  if (event.error) {
    showFieldError(event.field, event.error.message);
  } else {
    clearFieldError(event.field);
  }
  
  // Card brand detection
  if (event.field === 'cardNumber' && event.brand) {
    updateCardBrandIcon(event.brand);
  }
  
  // Track completion
  updateSubmitButton(event.complete);
});

fields.on('focus', (event) => {
  highlightField(event.field);
});

fields.on('blur', (event) => {
  unhighlightField(event.field);
});
```

### fields.tokenize()

Tokenize card data from secure fields.

```javascript
fields.tokenize({
  // Additional data
  cardHolderName: document.getElementById('cardholder-name').value
  
}).then(result => {
  if (result.error) {
    console.error('Tokenization failed:', result.error);
    showError(result.error.message);
  } else {
    // Use temporary token for payment
    safecharge.createPayment({
      sessionToken: sessionToken,
      paymentOption: {
        card: {
          ccTempToken: result.ccTempToken
        }
      }
    }, handleResponse);
  }
}).catch(error => {
  console.error('Tokenization error:', error);
});
```

---

## Utility Methods

### setOpenAmount()

Set the transaction amount dynamically (for open amount scenarios).

```javascript
safecharge.setOpenAmount({
  sessionToken: sessionToken,
  amount: '150.00'
  
}, function(response) {
  if (response.status === 'SUCCESS') {
    console.log('Amount updated');
    updateDisplayedAmount('150.00');
  }
});
```

---

### getToken()

Retrieve current session token.

```javascript
const token = safecharge.getToken();
console.log('Current session token:', token);
```

---

### destroy()

Clean up SDK resources and remove payment elements.

```javascript
safecharge.destroy();
```

---

## Complete Integration Example

```html
<!DOCTYPE html>
<html>
<head>
  <title>Custom Payment Form</title>
  <script src="https://cdn.safecharge.com/safecharge_resources/v1/websdk/safecharge.js"></script>
</head>
<body>
  <div id="payment-form">
    <div id="card-number" class="field"></div>
    <div id="card-expiry" class="field"></div>
    <div id="card-cvc" class="field"></div>
    <input type="text" id="cardholder-name" placeholder="Name on Card">
    <button id="pay-button" disabled>Pay $99.99</button>
    <div id="error-message"></div>
  </div>
  
  <div id="saved-cards"></div>
  <div id="apm-buttons"></div>
  
  <script>
    // Initialize SDK
    const safecharge = SafeCharge({
      env: 'int',
      merchantId: '1234567890',
      merchantSiteId: '123456'
    });
    
    let sessionToken;
    
    // Get session token from your server
    fetch('/api/create-session', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amount: '99.99', currency: 'USD' })
    })
    .then(r => r.json())
    .then(data => {
      sessionToken = data.sessionToken;
      initializePayment();
    });
    
    function initializePayment() {
      // Setup Secure Fields
      const fields = safecharge.createFields({
        sessionToken: sessionToken,
        style: {
          base: { fontSize: '16px', color: '#333' },
          invalid: { color: '#ff0000' }
        }
      });
      
      fields.create('cardNumber').mount('#card-number');
      fields.create('cardExpiry').mount('#card-expiry');
      fields.create('cardCvc').mount('#card-cvc');
      
      // Track field completion
      let formComplete = false;
      fields.on('change', (event) => {
        formComplete = event.complete;
        document.getElementById('pay-button').disabled = !formComplete;
        
        if (event.field === 'cardNumber' && event.brand) {
          console.log('Detected brand:', event.brand);
        }
      });
      
      // Load saved cards
      safecharge.getUserUPOs({
        sessionToken: sessionToken,
        userTokenId: currentUserId
      }, renderSavedCards);
      
      // Load available APMs
      safecharge.getAPMs({
        sessionToken: sessionToken,
        currencyCode: 'USD',
        countryCode: 'US'
      }, renderAPMs);
      
      // Handle payment
      document.getElementById('pay-button').onclick = async () => {
        const button = document.getElementById('pay-button');
        button.disabled = true;
        button.textContent = 'Processing...';
        
        try {
          // Tokenize card data
          const tokenResult = await fields.tokenize({
            cardHolderName: document.getElementById('cardholder-name').value
          });
          
          if (tokenResult.error) {
            throw new Error(tokenResult.error.message);
          }
          
          // Create payment
          safecharge.createPayment({
            sessionToken: sessionToken,
            paymentOption: {
              card: {
                ccTempToken: tokenResult.ccTempToken
              }
            },
            billingAddress: getBillingAddress()
          }, handlePaymentResponse);
          
        } catch (error) {
          showError(error.message);
          button.disabled = false;
          button.textContent = 'Pay $99.99';
        }
      };
    }
    
    function handlePaymentResponse(response) {
      if (response.result === 'APPROVED') {
        window.location.href = '/success?txId=' + response.transactionId;
      } else if (response.transactionStatus === 'REDIRECT') {
        // Handle 3DS
        safecharge.authenticate3d({
          sessionToken: sessionToken,
          transactionId: response.transactionId,
          challengeWindowSize: '05'
        }, handlePaymentResponse);
      } else {
        showError(response.errorDescription || 'Payment failed');
        resetButton();
      }
    }
    
    function renderSavedCards(response) {
      if (response.status !== 'SUCCESS') return;
      
      const container = document.getElementById('saved-cards');
      response.paymentMethods.forEach(upo => {
        const btn = document.createElement('button');
        btn.textContent = upo.upoName;
        btn.onclick = () => payWithSavedCard(upo.userPaymentOptionId);
        container.appendChild(btn);
      });
    }
    
    function renderAPMs(response) {
      if (response.status !== 'SUCCESS') return;
      
      const container = document.getElementById('apm-buttons');
      response.paymentMethods.forEach(apm => {
        const btn = document.createElement('button');
        btn.innerHTML = `<img src="${apm.logoURL}" alt="${apm.paymentMethodDisplayName}">`;
        btn.onclick = () => payWithAPM(apm.paymentMethod);
        container.appendChild(btn);
      });
    }
    
    function payWithSavedCard(upoId) {
      safecharge.createPayment({
        sessionToken: sessionToken,
        paymentOption: {
          userPaymentOptionId: upoId
        }
      }, handlePaymentResponse);
    }
    
    function payWithAPM(paymentMethod) {
      safecharge.createPayment({
        sessionToken: sessionToken,
        paymentOption: {
          alternativePaymentMethod: { paymentMethod }
        },
        urlDetails: {
          successUrl: window.location.origin + '/success',
          failureUrl: window.location.origin + '/failure',
          pendingUrl: window.location.origin + '/pending'
        }
      }, handlePaymentResponse);
    }
    
    function showError(message) {
      document.getElementById('error-message').textContent = message;
    }
    
    function resetButton() {
      const button = document.getElementById('pay-button');
      button.disabled = false;
      button.textContent = 'Pay $99.99';
    }
  </script>
</body>
</html>
```

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Simply Connect" icon="square-check" href="/integrations/simply-connect/quickstart">
    Pre-built payment UI
  </Card>
  <Card title="3D Secure" icon="shield" href="/api-reference/rest-1/3ds/authorize3d">
    3DS authentication details
  </Card>
  <Card title="REST API" icon="code" href="/api-reference/rest-1/overview">
    Server-side API reference
  </Card>
  <Card title="Class Objects" icon="cube" href="/api-reference/class-objects">
    Object reference
  </Card>
</CardGroup>
