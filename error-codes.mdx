---
title: "Error Codes"
description: "API error codes and troubleshooting"
---

# Error Codes

Reference for API error codes and how to resolve them.

## Error Response Format

```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "Human-readable message",
    "details": [
      {
        "field": "fieldName",
        "reason": "required",
        "message": "Field is required"
      }
    ]
  }
}
```

## HTTP Status Codes

| Code | Description | Action |
|------|-------------|--------|
| `200` | Success | Process response |
| `400` | Bad Request | Fix request parameters |
| `401` | Unauthorized | Check API key |
| `403` | Forbidden | Check permissions |
| `404` | Not Found | Check resource ID |
| `422` | Unprocessable | Business logic error |
| `429` | Rate Limited | Slow down requests |
| `500` | Server Error | Retry with backoff |
| `503` | Service Unavailable | Retry later |

## Authentication Errors

| Code | Message | Solution |
|------|---------|----------|
| `INVALID_API_KEY` | Invalid or missing API key | Check x-api-key header |
| `API_KEY_EXPIRED` | API key has expired | Generate new key in Control Panel |
| `INSUFFICIENT_PERMISSIONS` | Key lacks required permissions | Check key scopes |

## Validation Errors

| Code | Message | Solution |
|------|---------|----------|
| `INVALID_REQUEST` | Request validation failed | Check required fields |
| `INVALID_AMOUNT` | Invalid amount | Amount must be positive integer |
| `INVALID_CURRENCY` | Invalid currency code | Use ISO 4217 codes |
| `INVALID_CARD_NUMBER` | Invalid card number | Check card number format |
| `INVALID_EXPIRATION` | Invalid expiration date | Use MM/YYYY format |
| `INVALID_CVV` | Invalid CVV | CVV must be 3-4 digits |

## Payment Errors

| Code | Message | Solution |
|------|---------|----------|
| `DECLINED` | Payment declined | Try different card |
| `INSUFFICIENT_FUNDS` | Insufficient funds | Customer needs funds |
| `CARD_EXPIRED` | Card has expired | Use valid card |
| `CVV_MISMATCH` | CVV doesn't match | Re-enter CVV |
| `DO_NOT_HONOR` | Issuer declined | Contact card issuer |
| `FRAUD_SUSPECTED` | Fraud detected | Review transaction |

## Operation Errors

| Code | Message | Solution |
|------|---------|----------|
| `ALREADY_REFUNDED` | Payment already refunded | Check refund status |
| `REFUND_EXCEEDS_AMOUNT` | Refund exceeds available | Reduce refund amount |
| `VOID_NOT_ALLOWED` | Cannot void transaction | Use refund instead |
| `AUTH_EXPIRED` | Authorization expired | Create new payment |
| `ALREADY_SETTLED` | Already settled | Cannot void; use refund |
| `NOT_FOUND` | Transaction not found | Check paymentId |

## 3DS Errors

| Code | Message | Solution |
|------|---------|----------|
| `3DS_FAILED` | 3DS authentication failed | Customer failed auth |
| `3DS_TIMEOUT` | 3DS challenge timeout | Customer took too long |
| `3DS_NOT_SUPPORTED` | Card doesn't support 3DS | Use non-3DS flow |

## Error Handling Example

```javascript
async function processPayment(paymentData) {
  try {
    const response = await fetch('https://api-sandbox.nuvei.com/payment-api/payments', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': API_KEY
      },
      body: JSON.stringify(paymentData)
    });

    const data = await response.json();

    if (!response.ok) {
      // Handle API errors
      const { error } = data;
      
      switch (error.code) {
        case 'INVALID_API_KEY':
          throw new Error('Authentication failed');
        case 'INVALID_REQUEST':
          throw new Error(`Validation error: ${error.details?.[0]?.message}`);
        case 'DECLINED':
          return { success: false, message: 'Payment declined' };
        default:
          throw new Error(error.message);
      }
    }

    // Handle payment result
    if (data.result.status === 'approved') {
      return { success: true, paymentId: data.paymentId };
    } else if (data.result.status === 'pending') {
      return { success: false, requires3DS: true, data };
    } else {
      return { success: false, message: data.result.reason?.message };
    }

  } catch (error) {
    console.error('Payment error:', error);
    throw error;
  }
}
```

## Retry Strategy

For `5xx` errors and timeouts:

```javascript
async function fetchWithRetry(url, options, maxRetries = 3) {
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      const response = await fetch(url, options);
      
      if (response.status >= 500) {
        throw new Error(`Server error: ${response.status}`);
      }
      
      return response;
    } catch (error) {
      if (attempt === maxRetries) throw error;
      
      // Exponential backoff
      const delay = Math.pow(2, attempt) * 1000;
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

<Tip>
  Always log error responses for debugging. Include the `paymentId` and timestamp when contacting support.
</Tip>
